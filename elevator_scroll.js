function elevator_scroll(main_selector,options){this.es_main=document.querySelector(main_selector);this.es_left=this.es_main.querySelector('.es-left');this.es_right=this.es_main.querySelector('.es-right');this.es_sections=this.es_main.querySelectorAll('.es-section');this.left_sections=this.es_left.querySelectorAll('.es-section');this.right_sections=this.es_right.querySelectorAll('.es-section');this.max_index_num=this.left_sections.length-1;this.left_section_index=0;this.right_section_index=this.max_index_num;this.es_left_Y=0;this.es_right_Y=this.right_section_index*-window.innerHeight;this.hash=location.hash.replace('#','');this.leftAnchors=Array.from(options.sectionsName);this.rightAnchors=Array.from(options.sectionsName).reverse();if(options.menu){this.menu=document.querySelector(options.menu);this.menuLists=Array.from(this.menu.querySelectorAll('li'));}if(options.animateSpeed){this.animateSpeed=options.animateSpeed;}else{this.animateSpeed=1;}if(options.wheelDelta){this.wheelScroll=options.wheelDelta;}else{this.wheelScroll=100;}if(options.touchMove){this.touchScroll=options.touchMove;}else{this.touchScroll=100;}this.onPageChange=options.onPageChange;this.init();this.sectionsName(options);this.sectionsColor(options);this.scroll();this.fullscreen();this.spScroll();letself=this;window.addEventListener('load',function(){lethash=location.hash;if(hash){self.pageJump(hash);}else{self.setPosition();}self.activeMenuList();});window.addEventListener('hashchange',function(){lethash=location.hash;if(hash){if(self.onPageChange){self.onPageChange();}self.fullscreenOff();self.pageJump(hash);}self.activeMenuList();});window.addEventListener('resize',function(){self.es_left_Y=-window.innerHeight*self.left_section_index;self.es_right_Y=self.right_section_index*-window.innerHeight;self.setPosition();});}elevator_scroll.prototype={init:function(){this.sort();this.setActive();letself=this;setTimeout(function(){self.setStyle();},500);},setActive:function(){this.left_sections[0].classList.add('active');this.right_sections[0].classList.add('active');if(this.menuLists){this.menuLists[0].classList.add('active');}},sort:function(){letself=this;this.right_sections=Array.from(this.right_sections).reverse();this.right_sections.forEach(function(section){section.remove();self.es_right.append(section);});},setStyle:function(){this.es_left.style.transition=this.animateSpeed+"s";this.es_right.style.transition=this.animateSpeed+"s";this.es_main.style.height=`${window.innerHeight}px`;this.es_sections.forEach(function(section){section.style.height=`${window.innerHeight}px`;});},setPosition:function(){this.es_left.style.transform="translate3d(0,"+this.es_left_Y+"px,0)";this.es_right.style.transform="translate3d(0,"+this.es_right_Y+"px,0)";},sectionsName:function(option){leti=0;this.left_sections.forEach(function(left_section){left_section.dataset.name=option.sectionsName[i];i++;});i=this.max_index_num;this.right_sections.forEach(function(right_section){right_section.dataset.name=option.sectionsName[i];i--;});i=0;if(option.activeMenu){this.menuLists.forEach(function(list){list.dataset.name=option.activeMenu[i];i++;});}},sectionsColor:function(option){if(option.sectionsColor){leti=0;this.left_sections.forEach(function(left_section){left_section.style.backgroundColor=option.sectionsColor[i];i++;});i=this.max_index_num;this.right_sections.forEach(function(right_section){right_section.style.backgroundColor=option.sectionsColor[i];i--;});}},activeMenuList:function(){lethash=window.location.hash.replace('#','');if(hash&&this.menuLists){this.menuLists.forEach(function(list){list.classList.remove('active');if(list.dataset.name.match(hash)){list.classList.add('active');}});}},_pageUpDownId:false,scroll:function(){letself=this;this.es_sections.forEach(function(section){section.addEventListener('mousewheel',function(e){letsection=e.target.closest('.es-section');if(section.scrollHeight>window.innerHeight){if(e.wheelDelta<-self.wheelScroll&&self.es_right_Y<0&&section.scrollHeight-section.scrollTop<=section.clientHeight){if(self.onPageChange){self.onPageChange();}self.fullscreenOff();self.pageDown();}else if(e.wheelDelta>self.wheelScroll&&self.es_left_Y<0&&section.scrollTop===0){if(self.onPageChange){self.onPageChange();}self.fullscreenOff();self.pageUp();}}else{if(e.wheelDelta<-self.wheelScroll&&self.es_right_Y<0){if(self.onPageChange){self.onPageChange();}self.fullscreenOff();self.pageDown();}else if(e.wheelDelta>self.wheelScroll&&self.es_left_Y<0){if(self.onPageChange){self.onPageChange();}self.fullscreenOff();self.pageUp();}}});});},pageUp:function(){letself=this;if(!this._pageUpDownId){this._pageUpDownId=setTimeout(function(){self._pageUpDownId=false;},this.animateSpeed*1000);this.es_left_Y+=window.innerHeight;this.es_right_Y-=window.innerHeight;this.es_left.style.transform="translate3d(0,"+this.es_left_Y+"px,0)";this.left_section_index--;this.es_right.style.transform="translate3d(0,"+this.es_right_Y+"px,0)";this.right_section_index++;this._activeAllocate();}},pageDown:function(){letself=this;if(!this._pageUpDownId){this._pageUpDownId=setTimeout(function(){self._pageUpDownId=false;},this.animateSpeed*1000);this.es_left_Y-=window.innerHeight;this.es_right_Y+=window.innerHeight;this.es_left.style.transform="translate3d(0,"+this.es_left_Y+"px,0)";this.left_section_index++;this.es_right.style.transform="translate3d(0,"+this.es_right_Y+"px,0)";this.right_section_index--;this._activeAllocate();}},pageJump:function(id){letself=this;lethash=id.replace('#','');varleftPassIndex=self.leftAnchors.findIndex(function(element){returnelement===hash;});varrightPassIndex=self.rightAnchors.findIndex(function(element){returnelement===hash;});if(hash){self.es_left_Y=-window.innerHeight*leftPassIndex;if(!self.es_left_Y){self.es_left_Y=0;}self.es_right_Y=-window.innerHeight*rightPassIndex;if(!self.es_right_Y){self.es_right_Y=0;}self.es_left.style.transform="translate3d(0,"+self.es_left_Y+"px,0)";self.es_right.style.transform="translate3d(0,"+self.es_right_Y+"px,0)";this.left_section_index=leftPassIndex;this.right_section_index=rightPassIndex;this._activeAllocate();}},_activeAllocate:function(){this.es_sections.forEach(function(section){section.classList.remove('active');});this.left_sections[this.left_section_index].classList.add('active');this.right_sections[this.right_section_index].classList.add('active');lethash=this.left_sections[this.left_section_index].dataset.name;location.hash=hash;this.activeMenuList();},fullscreen:function(){this.es_left.style.zIndex="2";this.es_right.style.zIndex="1";self=this;this.es_sections.forEach(function(section){if(section.dataset.fullscreen==="true"){letfullScreenLeft=document.createElement('div');fullScreenLeft.className="fullscreen-left";letleft_section=section.innerHTML;section.innerHTML="";fullScreenLeft.innerHTML=left_section;section.append(fullScreenLeft);section.style.width="100vw";self.right_sections.forEach(function(rightSection){if(section.dataset.name===rightSection.dataset.name){letfullScreenRight=document.createElement('div');fullScreenRight.className="fullscreen-right";letright_section=rightSection.innerHTML;rightSection.innerHTML="";fullScreenRight.innerHTML=right_section;rightSection.append(fullScreenRight);}});}});},_fullscreenOffId:false,fullscreenOff:function(){if(!this._fullscreenOffId){this._fullscreenOffId=setTimeout(function(){self._fullscreenOffId=false;},this.animateSpeed*1000);letself=this;self.es_left.style.zIndex="1";this.es_sections.forEach(function(section){if(section.dataset.fullscreen==="true"){self.es_left.style.zIndex="1";section.style.width="100%";letscroll_Y=section.scrollTop;self.right_sections.forEach(function(rightSection){if(section.dataset.name===rightSection.dataset.name){rightSection.scrollTop=scroll_Y;setTimeout(function(){section.style.width="100vw";self.es_left.style.zIndex="2";self.es_right.style.zIndex="1";},self.animateSpeed*1000);}});}});}},spScroll:function(){letself=this;window.ontouchstart=function(e){position_Y=e.changedTouches[0].pageY;move_Y="";};window.ontouchmove=function(e){if(position_Y-e.changedTouches[0].pageY<-self.touchScroll){move_Y="pageUp";}else if(position_Y-e.changedTouches[0].pageY>self.touchScroll){move_Y="pageDown";}};self.es_sections.forEach(function(section){section.ontouchend=function(){if(section.scrollHeight>window.innerHeight){if(move_Y==="pageDown"&&self.es_right_Y<0&&section.scrollHeight-section.scrollTop<=section.clientHeight){self.pageDown();}else if(move_Y==="pageUp"&&self.es_left_Y<0&&section.scrollTop<=50){self.pageUp();}}else{if(move_Y==="pageDown"&&self.es_right_Y<0){self.pageDown();}else if(move_Y==="pageUp"&&self.es_left_Y<0){self.pageUp();}}};});},};